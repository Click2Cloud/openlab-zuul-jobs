# Shared jobs specific to the OpenLab Project

# Acceptance test base job
- job:
    name: acceptance-test
    description: |
      Base job for all types of acceptance test jobs.
    pre-run: playbooks/acceptance-test/pre
    timeout: 7200

# Gophercloud jobs
- job:
    name: gophercloud-unittest
    description: |
      Run gophercloud unit test
    run: playbooks/gophercloud-unittest/run
    post-run: playbooks/gophercloud-unittest/post

- job:
    name: gophercloud-acceptance-test
    parent: acceptance-test
    description: |
      Run gophercloud acceptance test
    run: playbooks/gophercloud-acceptance-test/run
    post-run: playbooks/gophercloud-acceptance-test/post

- job:
    name: gophercloud-acceptance-test-pike
    parent: acceptance-test
    description: |
      Run gophercloud acceptance test with stable/pike OpenStack
    run: playbooks/gophercloud-acceptance-test-pike/run
    post-run: playbooks/gophercloud-acceptance-test-pike/post

- job:
    name: gophercloud-acceptance-test-ocata
    parent: acceptance-test
    description: |
      Run gophercloud acceptance test with stable/ocata OpenStack
    run: playbooks/gophercloud-acceptance-test-ocata/run
    post-run: playbooks/gophercloud-acceptance-test-ocata/post

- job:
    name: gophercloud-acceptance-test-newton
    parent: acceptance-test
    description: |
      Run gophercloud acceptance test with stable/newton OpenStack
    run: playbooks/gophercloud-acceptance-test-newton/run
    post-run: playbooks/gophercloud-acceptance-test-newton/post

- job:
    name: gophercloud-acceptance-test-mitaka
    parent: acceptance-test
    description: |
      Run gophercloud acceptance test with stable/mitaka OpenStack
    run: playbooks/gophercloud-acceptance-test-mitaka/run
    post-run: playbooks/gophercloud-acceptance-test-mitaka/post
    nodeset: ubuntu-trusty

# Terraform-provider-openstack jobs
- job:
    name: terraform-provider-openstack-unittest
    description: |
      Run terraform provider openstack unit test
    run: playbooks/terraform-provider-openstack-unittest/run
    post-run: playbooks/terraform-provider-openstack-unittest/post

- job:
    name: terraform-provider-openstack-acceptance-test
    parent: acceptance-test
    description: |
      Run terraform provider openstack acceptance test
    run: playbooks/terraform-provider-openstack-acceptance-test/run
    post-run: playbooks/terraform-provider-openstack-acceptance-test/post

- job:
    name: terraform-provider-openstack-acceptance-test-pike
    parent: acceptance-test
    description: |
      Run terraform provider openstack acceptance test with stable/pike OpenStack
    run: playbooks/terraform-provider-openstack-acceptance-test-pike/run
    post-run: playbooks/terraform-provider-openstack-acceptance-test-pike/post

- job:
    name: terraform-provider-openstack-acceptance-test-ocata
    parent: acceptance-test
    description: |
      Run terraform provider openstack acceptance test with stable/ocata OpenStack
    run: playbooks/terraform-provider-openstack-acceptance-test-ocata/run
    post-run: playbooks/terraform-provider-openstack-acceptance-test-ocata/post

- job:
    name: terraform-provider-openstack-acceptance-test-newton
    parent: acceptance-test
    description: |
      Run terraform provider openstack acceptance test with stable/newton OpenStack
    run: playbooks/terraform-provider-openstack-acceptance-test-newton/run
    post-run: playbooks/terraform-provider-openstack-acceptance-test-newton/post

- job:
    name: terraform-provider-openstack-acceptance-test-mitaka
    parent: acceptance-test
    description: |
      Run terraform provider openstack acceptance test with stable/mitaka OpenStack
    run: playbooks/terraform-provider-openstack-acceptance-test-mitaka/run
    post-run: playbooks/terraform-provider-openstack-acceptance-test-mitaka/post
    nodeset: ubuntu-trusty

# Terraform jobs
- job:
    name: terraform-unittest
    description: |
      Run terraform unit test
    run: playbooks/terraform-unittest/run
    post-run: playbooks/terraform-unittest/post

- job:
    name: terraform-acceptance-test
    parent: acceptance-test
    description: |
      Run terraform acceptance test
    run: playbooks/terraform-acceptance-test/run
    post-run: playbooks/terraform-acceptance-test/post
